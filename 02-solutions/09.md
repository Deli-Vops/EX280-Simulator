# Exercise: Diagnose a Deployment that Doesn't Start in OpenShift

**Objective:** Investigate why the `tribu` deployment in the `comanche` project fails to start and determine what is missing or misconfigured to get the pods running.

## Requirements and Steps

- A project named `comanche`.

```bash
# oc project comanche
```

---

- A ServiceAccount named `comanche-sa`.

```bash
# oc describe sa comanche-sa
```

---

- A Deployment named `tribu`

```bash
# oc describe deployment tribu
```


### 1. Deployment and Service Account

You have the `tribu` deployment applied in the `comanche` project which is using the service account `comanche-sa`.

For no apparent reason, the pod for the `tribu` deployment is either pending or in CrashLoopBackOff mode. Investigate what is missing to deploy it.

---

The deployment `tribu` uses the `comanche-sa` serviceaccount, but the pods do not start because the `httpd:latest` image requires running processes as `root` for certain permissions within the container. OpenShift, by default, prevents containers from running as root.

To fix this, you must add the anyuid SecurityContextConstraint (SCC) to the serviceaccount:

```bash
oc adm policy add-scc-to-user anyuid -z comanche-sa -n comanche

oc rollout restart deployment/tribu -n comanche
```

### Notes

Review the pod's logs for more information.
